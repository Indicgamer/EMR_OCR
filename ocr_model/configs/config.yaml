# Configuration file for OCR model training and inference
# This file defines all hyperparameters and paths

# ============================================================================
# Dataset Configuration
# ============================================================================
dataset:
  prescriptions_dir: "../data/data1"
  lab_reports_dir: "../data/lbmaske"
  output_dir: "./data/processed"
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1
  seed: 42
  
  # Data processing
  resize_height: 64
  resize_width: 256
  augmentation: true

# ============================================================================
# Model Configuration
# ============================================================================
model:
  type: "CRNN"  # Options: CRNN, PaddleOCR, Transformer
  pretrained: true
  freeze_backbone: false
  
  # CRNN specific
  num_channels: 3
  num_classes: 95  # Alphanumeric + special characters
  hidden_size: 256
  num_layers: 2
  
  # Input parameters
  input_height: 64
  input_width: 256
  
# ============================================================================
# Training Configuration
# ============================================================================
training:
  batch_size: 32
  num_epochs: 50
  learning_rate: 1e-4
  weight_decay: 1e-5
  momentum: 0.9
  
  # Optimizer: Adam, SGD, AdamW
  optimizer: "Adam"
  
  # Learning rate scheduler
  lr_scheduler: "CosineAnnealingLR"
  lr_warmup_epochs: 5
  
  # Loss function
  loss: "CTCLoss"  # Connectionist Temporal Classification
  
  # Early stopping
  early_stopping: true
  patience: 10
  min_delta: 1e-4
  
  # Mixed precision training (for faster GPU training)
  mixed_precision: true
  
# ============================================================================
# Validation & Evaluation
# ============================================================================
validation:
  eval_interval: 5  # Evaluate every N epochs
  val_batch_size: 64
  
  # Metrics
  metrics:
    - "CER"  # Character Error Rate
    - "WER"  # Word Error Rate
    - "Accuracy"
  
# ============================================================================
# Data Augmentation Configuration
# ============================================================================
augmentation:
  rotation: 10
  shear: 0.2
  brightness: 0.3
  contrast: 0.3
  blur: 0.2
  gaussian_noise: 0.1
  elastic_transform: 0.1
  
# ============================================================================
# Hardware & Logging
# ============================================================================
hardware:
  device: "cuda"  # Options: cuda, cpu
  num_workers: 4
  pin_memory: true
  
logging:
  log_dir: "./logs"
  save_dir: "./checkpoints"
  save_interval: 5  # Save checkpoint every N epochs
  log_interval: 100  # Log metrics every N steps
  
# ============================================================================
# Inference Configuration
# ============================================================================
inference:
  model_path: "./checkpoints/best_model.pth"
  confidence_threshold: 0.5
  batch_size: 32
  
# ============================================================================
# Medical Document Specific Settings
# ============================================================================
medical:
  # Custom character set for medical documents
  medical_vocabulary: true
  special_characters: "()[].,/-+*°%@™®©"
  numbers_only: false
  
  # Document types
  document_types:
    - "prescription"
    - "lab_report"
    - "discharge_summary"
